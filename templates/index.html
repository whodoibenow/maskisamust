<!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="UTF-8">
        <link href="static/style.css" rel="stylesheet">
    </head>
    <body>    
        <center>
            <div class='cont'>
                <h2>WELCOME<br> Face Mask Detector</h2>
            </div>
            

            <form method="POST" action="{{url_for('mask_image')}}" enctype="multipart/form-data">
                <input type="file" name='image' class='btn'><br><br><br>
                <input type="submit" class='btn'>
            </form>
            <form action="/upload" method="post" enctype="multipart/form-data" >
              <div align="center" style="margin-top:20px">
                  <div id="webcam" style="margin-bottom:10px"></div>
                  <input id="boton" type="button" value="Revisar" class="btn btn-primary" onclick="take_snapshot()">
                  <div id="loading" style="display:none;"><img src="{{ url_for('static', filename='Spinner-1s-200px.gif')}}"/>
                  </div>
              </div>
            </form>
            <div class="text-center" id="content"></div>
        </center>

    </body>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webcamjs/1.0.26/webcam.min.js"></script>
    <script language="JavaScript">
            Webcam.set({
                width: 320,
                height: 240,
                image_format: 'jpeg',
                jpeg_quality: 90
            });
            Webcam.attach('#webcam');

            function getHTMLTemplate(bodyFormData) {
              $("#boton").prop('disabled', true);
              $("#loading").show();

              return axios.post( '/upload',
                    bodyFormData,
                    {
                      headers: {
                          'Content-Type': 'multipart/form-data'
                      }
                    }
                  ).then(response => {
                    this.response = response.data

                    return this.response
                  })
            };


            function take_snapshot() {
                    // take snapshot and get image data
                    Webcam.snap( function(data_uri) {
                        // display results in page
                  var file =  data_uri;
                  var bodyFormData = new FormData();
                  bodyFormData.append('image', file);

                  
                    

                  document.getElementById("content").innerHTML = text;
                  $("#loading").hide();
                  $("#boton").prop('disabled', false);
                });


                });
          } 
  </script>

</html>
